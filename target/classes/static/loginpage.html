<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Login</title>
        <link rel="stylesheet" href="Styles/loginpage.css"/>
    </head>
    <body>
        <header>
            <div>
                <h1 style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">Welding Reimbursements</h1>
            </div>
        </header>
        <h2>Please Login:</h2>
        <div id="submission">
            <form id="only_form" method="POST" onsubmit="return setLogin()" action="http://localhost:7000/employee/login">
                <input type="text" placeholder="Username" required maxlength="20" name="username" id="user"/>
                <input type="text" placeholder="Password" required name="password" id="pass"/>
                <input type="submit" placeholder="Login" required/>
            </form>
        </div>
        <style>
            h3{
                color: black;
            }
            .reimbursement_div{
                background-color: lightslategray;
            }
        </style>
        <footer>
            <h5>Copyright No One. No Rights Reserved.</h5>
        </footer>
    </body>
    <script>
        function setLogin(){
            let url = 'http://localhost:7000/employee/';
            url = url + document.getElementById("user").value;
            console.log(url);
            let xhr = new XMLHttpRequest(); //state 0
            xhr.onreadystatechange = function(){
                //ready state 3 and 4
                if(xhr.readyState === 4 && xhr.status === 200){
                    let result = JSON.parse(xhr.response);
                    localStorage.setItem("user", result.employee_name);
                }
            }
            xhr.open('GET', url); //readystate 1
            xhr.send(); //readystate 2
        }
    </script>
</html>